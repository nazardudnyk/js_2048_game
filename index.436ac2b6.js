function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);n<t;n++)e[n]=r[n];return e}function t(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||e(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r){return r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r}function e(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(t,n)}}var o,i={Left:"ArrowLeft",Right:"ArrowRight",Down:"ArrowDown",Up:"ArrowUp"},a=document.querySelector("button"),c=document.querySelector(".message-start"),u=document.querySelector(".message-lose"),f=document.querySelector(".message-win"),l=document.querySelector("tbody"),s=document.querySelector(".game-score"),d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m=!1,y=0,h=t(l.children).map(function(r){return t(r.children)});function v(){o=d.slice();for(var r=!1,t=0;t<4;t++){for(var n=0;n<4;n++)if(d[t][n]!==o[t][n]){r=!0;break}if(r)break}if(!r){var i,a,c=(i=[],d.forEach(function(r,t){r.forEach(function(r,n){0===r&&i.push([t,n])})}),function(r){if(Array.isArray(r))return r}(a=i[Math.floor(Math.random()*i.length)])||function(r,t){var n,e,o=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=o){var i=[],a=!0,c=!1;try{for(o=o.call(r);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(r){c=!0,e=r}finally{try{a||null==o.return||o.return()}finally{if(c)throw e}}return i}}(a,2)||e(a,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1];d[u][f]=Math.random()>=.9?4:2}}function b(){d.forEach(function(r,t){r.forEach(function(r,n){var e=h[t][n];e.classList="field-cell",0===r?e.innerText="":(e.innerText=r,e.classList.add("field-cell--".concat(r)))})}),s.innerText=y}function p(){A()&&(o=o.map(function(r){var t=r.filter(function(r){return 0!==r});return t.forEach(function(r,n){r===t[n+1]&&(t[n]*=2,t.splice(n+1,1),y+=t[n],2048===t[n]&&(m=!0))}),t.concat(Array(4-t.length).fill(0))}))}function g(){o.forEach(function(r){return r.reverse()})}function S(){A()&&(g(),p(),g())}function L(){o=o[0].map(function(r,t){return o.map(function(r){return r[t]})})}function A(){for(var r=function(r){if(o[r].some(function(r){return 0===r})||o[r].some(function(t,n){return t===o[r][n+1]}))return{v:!0}},t=0;t<4;t++){var e=r(t);if("object"===n(e))return e.v}return!1}a.addEventListener("click",function(){a.classList.contains("start")?(a.classList.remove("start"),a.classList.add("restart"),a.innerText="Restart",c.classList.add("hidden")):(d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],y=0,u.classList.toggle("hidden",!0),f.classList.toggle("hidden",!0)),v(),v(),b()}),document.addEventListener("keydown",function(r){switch(o=d,r.key){case i.Left:p();break;case i.Right:S();break;case i.Down:L(),S(),L();break;case i.Up:L(),p(),L();break;default:return}for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(o[t][e]!==d[t][e]){if(d=o,v(),b(),m){f.classList.remove("hidden");return}A()||(L(),function(){for(var r=function(r){if(o[r].some(function(t,n){return t===o[r][n+1]}))return{v:!0}},t=0;t<4;t++){var e=r(t);if("object"===n(e))return e.v}return!1}())||u.classList.remove("hidden");return}});
//# sourceMappingURL=index.436ac2b6.js.map
